Урок 78. Tab - вкладки. TabContentFactory, ручное создание содержимого вкладки
14 мая 2012
В этом уроке:
- вручную создаем содержимое вкладки

При работе с вкладками система предоставляет нам возможность самим создать View, которое будет использовано в качестве содержимого вкладки. Нам надо просто создать объект, реализующий интерфейс TabContentFactory, и накодить метод createTabContent. Этот метод на вход берет тэг, а выдать должен View.
View мы умеем создавать двумя способами: 1) непосредственно ручное создание объекта;  2) с помощью LayoutInflater.

Создадим проект:
Project name: P0781_TabContentFactory Build Target: Android 2.3.3 Application name: TabContentFactory Package name: ru.startandroid.develop.p0781tabcontentfactory Create Activity: MainActivity

Пропишем текст в strings.xml:

Экран main.xml:
FrameLayout не заполняем, т.к. сами будем View создавать.

Создадим layout-файл tab.xml:
Из него мы с помощью LayoutInflater будем получать View и устанавливать в качестве содержимого вкладки.

Кодим MainActivity.java:
Создание вкладок идет как обычно, только методу setContent на вход передаем объект, реализующий TabHost.TabContentFactory. Когда системе необходимо будет построить содержимое вкладки, она воспользуется этим объектом - вызовет его метод createTabContent. На вход ему пойдет тэг вкладки, на выходе должно получиться View.  И наша задача – реализовать это.
tabFactory – объект, реализующий интерфейс TabHost.TabContentFactory. В его методе createTabContent мы проверяем тэг. Если это тэг первой вкладки, то прогоняем tab.xml через LayoutInflater и возвращаем получившееся View. Если тэг второй вкладки, то вручную создаем TextView и возвращаем его.

Все сохраним и запустим приложение. Первая вкладка:


Вторая вкладка:


В итоге мы создали содержимое первой вкладки из layout-файла, а содержимое второй – сами, через создание объектов.

На следующем уроке:
- парсим XML с помощью XmlPullParser
Присоединяйтесь к нам в Telegram:
- в канале StartAndroid публикуются ссылки на новые статьи с сайта startandroid.ru и интересные материалы с хабра, medium.com и т.п.
- в чатах решаем возникающие вопросы и проблемы по различным темам: Android, Compose, Kotlin, RxJava, Dagger, Тестирование, Performance
- ну и если просто хочется поговорить с коллегами по разработке, то есть чат Флудильня
