Урок 74. Preferences. Программное создание экрана настроек
30 апреля 2012
В этом уроке:
- создаем экран настроек программно

На прошлых уроках мы создавали экран настроек из xml файлов. Теперь попробуем сделать это в коде. Попробуем создать экран с прошлого урока.

Создадим проект:
Project name: P0741_PreferencesCode Build Target: Android 2.3.3 Application name: PreferencesCode Package name: ru.startandroid.develop.p0741preferencescode Create Activity: MainActivity

Заполним strings.xml:

Напомню xml-код настроек из прошлого урока:
Попытаемся создать все эти элементы программно.

Создаем PrefActivity.java:
Сначала мы создаем PreferenceScreen и сообщаем Activity, что этот экран будет корневым.
Далее мы последовательно создаем Preference-элементы, присваиваем им атрибуты и добавляем детей к родителям.
В конце мы реализуем зависимости (dependency) и, как и на прошлом уроке, привязываем состояние активности категории categ2 к значению чекбокса chb3.
Метод setDependency лучше вызывать в самом конце. Иначе может быть неверное поведение элементов.

MainActivity.java:

Запустив приложение, вы получите экран, аналогичный экрану с предыдущего урока. Только сделан программно, а не из xml.
Кстати, вы можете не только добавлять, но и удалять Preferences-элементы. Для этого у категорий и экранов есть методы removePreference и removeAll.

На следующем уроке:
- работаем с файлами

Присоединяйтесь к нам в Telegram:
- в канале StartAndroid публикуются ссылки на новые статьи с сайта startandroid.ru и интересные материалы с хабра, medium.com и т.п.
- в чатах решаем возникающие вопросы и проблемы по различным темам: Android, Compose, Kotlin, RxJava, Dagger, Тестирование, Performance
- ну и если просто хочется поговорить с коллегами по разработке, то есть чат Флудильня
